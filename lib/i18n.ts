/**
 * Internationalization (i18n) system for ILEWA
 * Automatic language detection based on browser settings
 */

// English translations
export const en = {
  nav: {
    home: "Home",
    map: "Map",
    dashboard: "Dashboard",
    submitProject: "Submit Project",
    newProject: "New Project",
    signIn: "Sign In",
    signOut: "Sign Out",
    profile: "Profile",
    settings: "Settings",
  },
  auth: {
    signIn: "Sign In",
    signUp: "Sign Up",
    email: "Email",
    password: "Password",
    fullName: "Full Name",
    confirmPassword: "Confirm Password",
    forgotPassword: "Forgot Password?",
    signingIn: "Signing in...",
    signingUp: "Signing up...",
  },
  landing: {
    title: "ILEWA",
    subtitle: "Interactive Mapping of Innovative Projects",
    description: "Discover, share, and track innovative projects around the world. A collaborative platform to visualize the impact of initiatives in education, environment, health, and economy.",
    exploreMap: "Explore the Map",
    featuresTitle: "Powerful Features",
    featuresSubtitle: "Everything you need to discover, share, and manage innovative projects",
    activeProjects: "Active Projects",
    countriesRepresented: "Countries Represented",
    contributors: "Contributors",
    monthlyGrowth: "Monthly Growth",
  },
  features: {
    interactiveMap: {
      title: "Interactive Map",
      description: "Explore projects on an interactive world map with different base layers and measurement tools.",
    },
    advancedFiltering: {
      title: "Advanced Filtering",
      description: "Filter projects by category, time period, and location to find exactly what you're looking for.",
    },
    collaboration: {
      title: "Collaboration",
      description: "Comment, discuss, and collaborate with other contributors on projects that interest you.",
    },
    analytics: {
      title: "Analytics & Statistics",
      description: "Visualize project trends and statistics with detailed interactive charts.",
    },
    moderation: {
      title: "Moderation",
      description: "All projects are validated by our team before publication to ensure content quality.",
    },
    realTime: {
      title: "Real-Time",
      description: "Receive instant notifications about new projects and important updates.",
    },
  },
  projectForm: {
    title: "Submit a Project",
    name: "Project Name",
    namePlaceholder: "Enter project name",
    category: "Category",
    categoryPlaceholder: "Select a category",
    description: "Description",
    descriptionPlaceholder: "Describe your project...",
    location: "Location",
    locationPlaceholder: "Search for a location...",
    coordinates: "Coordinates",
    latitude: "Latitude",
    longitude: "Longitude",
    repositoryUrl: "Repository URL",
    repositoryUrlPlaceholder: "https://github.com/...",
    date: "Implementation Date",
    datePlaceholder: "Select a date",
    additionalInfo: "Additional Information",
    additionalInfoPlaceholder: "Any other relevant information...",
    submit: "Submit Project",
    submitting: "Submitting...",
    requiredFields: "Required fields",
  },
  categories: {
    economy: "Economy",
    health: "Health",
    environment: "Environment",
    education: "Education",
    epidemic: "Epidemic",
    other: "Other",
    all: "All Categories",
  },
  map: {
    title: "Interactive Map",
    subtitle: "Explore geolocated projects",
    basemap: "Basemap",
    category: "Category",
    filters: "Filters",
    tools: "Tools",
    measure: "Measure",
    distance: "Distance",
    area: "Area",
    legend: "Legend",
  },
  dashboard: {
    title: "Dashboard",
    welcome: "Welcome",
    stats: "Statistics",
    myProjects: "My Projects",
    totalProjects: "Total Projects",
    activeProjects: "Active Projects",
    pendingProjects: "Pending Projects",
  },
  common: {
    loading: "Loading...",
    error: "Error",
    success: "Success",
    save: "Save",
    cancel: "Cancel",
    delete: "Delete",
    edit: "Edit",
    view: "View",
  },
}

// French translations
export const fr = {
  nav: {
    home: "Accueil",
    map: "Carte",
    dashboard: "Tableau de bord",
    submitProject: "Soumettre un projet",
    newProject: "Nouveau Projet",
    signIn: "Connexion",
    signOut: "Déconnexion",
    profile: "Profil",
    settings: "Paramètres",
  },
  auth: {
    signIn: "Connexion",
    signUp: "Inscription",
    email: "Email",
    password: "Mot de passe",
    fullName: "Nom complet",
    confirmPassword: "Confirmer le mot de passe",
    forgotPassword: "Mot de passe oublié ?",
    signingIn: "Connexion en cours...",
    signingUp: "Inscription en cours...",
  },
  landing: {
    title: "ILEWA",
    subtitle: "Cartographie Interactive des Projets Innovants",
    description: "Découvrez, partagez et suivez des projets innovants à travers le monde. Une plateforme collaborative pour visualiser l'impact des initiatives dans l'éducation, l'environnement, la santé et l'économie.",
    exploreMap: "Explorer la carte",
    featuresTitle: "Fonctionnalités Puissantes",
    featuresSubtitle: "Tout ce dont vous avez besoin pour découvrir, partager et gérer des projets innovants",
    activeProjects: "Projets actifs",
    countriesRepresented: "Pays représentés",
    contributors: "Contributeurs",
    monthlyGrowth: "Croissance mensuelle",
  },
  features: {
    interactiveMap: {
      title: "Carte Interactive",
      description: "Explorez les projets sur une carte mondiale interactive avec différents fonds de carte et outils de mesure.",
    },
    advancedFiltering: {
      title: "Filtrage Avancé",
      description: "Filtrez les projets par catégorie, période, et localisation pour trouver exactement ce que vous cherchez.",
    },
    collaboration: {
      title: "Collaboration",
      description: "Commentez, discutez et collaborez avec d'autres contributeurs sur les projets qui vous intéressent.",
    },
    analytics: {
      title: "Analyses & Statistiques",
      description: "Visualisez les tendances et statistiques des projets avec des graphiques interactifs détaillés.",
    },
    moderation: {
      title: "Modération",
      description: "Tous les projets sont validés par notre équipe avant publication pour garantir la qualité du contenu.",
    },
    realTime: {
      title: "Temps Réel",
      description: "Recevez des notifications instantanées sur les nouveaux projets et les mises à jour importantes.",
    },
  },
  projectForm: {
    title: "Soumettre un projet",
    name: "Nom du projet",
    namePlaceholder: "Entrez le nom du projet",
    category: "Catégorie",
    categoryPlaceholder: "Sélectionnez une catégorie",
    description: "Description",
    descriptionPlaceholder: "Décrivez votre projet...",
    location: "Localisation",
    locationPlaceholder: "Rechercher un lieu...",
    coordinates: "Coordonnées",
    latitude: "Latitude",
    longitude: "Longitude",
    repositoryUrl: "URL du dépôt",
    repositoryUrlPlaceholder: "https://github.com/...",
    date: "Date de réalisation",
    datePlaceholder: "Sélectionner une date",
    additionalInfo: "Informations supplémentaires",
    additionalInfoPlaceholder: "Toute autre information pertinente...",
    submit: "Soumettre le projet",
    submitting: "Envoi en cours...",
    requiredFields: "Champs obligatoires",
  },
  categories: {
    economy: "Économie",
    health: "Santé",
    environment: "Environnement",
    education: "Éducation",
    epidemic: "Épidémie",
    other: "Autre",
    all: "Toutes les catégories",
  },
  map: {
    title: "Carte Interactive",
    subtitle: "Explorez les projets géolocalisés",
    basemap: "Fond de carte",
    category: "Catégorie",
    filters: "Filtres",
    tools: "Outils",
    measure: "Mesurer",
    distance: "Distance",
    area: "Surface",
    legend: "Légende",
  },
  dashboard: {
    title: "Tableau de bord",
    welcome: "Bienvenue",
    stats: "Statistiques",
    myProjects: "Mes projets",
    totalProjects: "Total des projets",
    activeProjects: "Projets actifs",
    pendingProjects: "Projets en attente",
  },
  common: {
    loading: "Chargement...",
    error: "Erreur",
    success: "Succès",
    save: "Enregistrer",
    cancel: "Annuler",
    delete: "Supprimer",
    edit: "Modifier",
    view: "Voir",
  },
}

// Type for translations
export type Translations = typeof en
export type Language = 'en' | 'fr'

// All available languages
export const languages = {
  en,
  fr,
}

/**
 * Detect browser language
 * Returns 'en' or 'fr' based on browser settings
 */
export function detectBrowserLanguage(): Language {
  if (typeof window === 'undefined') {
    return 'en' // Default for SSR
  }

  const browserLang = navigator.language || (navigator as any).userLanguage
  
  // Check if browser language starts with 'fr'
  if (browserLang.toLowerCase().startsWith('fr')) {
    return 'fr'
  }
  
  // Default to English
  return 'en'
}

/**
 * Get translations for a specific language
 */
export function getTranslations(lang: Language): Translations {
  return languages[lang] || languages.en
}

/**
 * Get nested translation value
 * Example: t('nav.home', 'en') => "Home"
 */
export function t(key: string, lang: Language): string {
  const translations = getTranslations(lang)
  const keys = key.split('.')
  let value: any = translations
  
  for (const k of keys) {
    value = value?.[k]
    if (value === undefined) {
      console.warn(`Translation key not found: ${key} for language: ${lang}`)
      return key
    }
  }
  
  return value
}

export default languages
